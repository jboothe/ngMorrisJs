{"version":3,"names":[],"mappings":"","sources":["home/drivers-service.js"],"sourcesContent":["/**\n * @ngdoc object\n * @name DriversService\n * @description Service for Drivers Data\n * @author Created by jboothe on 11/26/15\n */\n\n(function () {\n  'use strict';\n\n  angular.module('drivers', [])\n    .factory('DriversService', DriversService);\n\n  DriversService.$inject = ['$q'];\n  function DriversService ($q) {\n    var service = {\n      findAll: findAll,\n      findById: findById,\n      getDonutData: getDonutData\n    };\n\n    /*eslint-disable */\n    var driverSeasonResults = [\n      {'id': 1, 'round': 1, 'qualifyPos': 1, 'finishPos': 2, 'points': 45, 'status': 'Finished', 'avgLap':197.34, 'fastLap': 204.54},\n      {'id': 2, 'round': 2, 'qualifyPos': 3, 'finishPos': 4, 'points': 30, 'status': 'Finished', 'avgLap':188.34, 'fastLap': 200.1},\n      {'id': 3, 'round': 3, 'qualifyPos': 5, 'finishPos': 6, 'points': 20, 'status': '+Laps', 'avgLap':175.95, 'fastLap': 188.41},\n      {'id': 4, 'round': 4, 'qualifyPos': 1, 'finishPos': 3, 'points': 35, 'status': 'DNF', 'avgLap':187.34, 'fastLap': 204.54},\n      {'id': 5, 'round': 5, 'qualifyPos': 3, 'finishPos': 9, 'points': 5, 'status': '+Laps', 'avgLap':177.34, 'fastLap': 185.15},\n      {'id': 6, 'round': 6, 'qualifyPos': 2, 'finishPos': 1, 'points': 50, 'status': 'Finished', 'avgLap':167.34, 'fastLap': 179.03},\n      {'id': 7, 'round': 7, 'qualifyPos': 5, 'finishPos': 5, 'points': 50, 'status': 'Finished', 'avgLap':197.34, 'fastLap': 210.33},\n      {'id': 8, 'round': 8, 'qualifyPos': 1, 'finishPos': 10, 'points': 0, 'status': 'DNF', 'avgLap':207.34, 'fastLap': 222.22},\n      {'id': 9, 'round': 9, 'qualifyPos': 4, 'finishPos': 7, 'points': 15, 'status': '+Laps', 'avgLap':197.89, 'fastLap': 206.41},\n      {'id':10, 'round':10, 'qualifyPos': 10, 'finishPos': 5, 'points': 0, 'status': 'Finished', 'avgLap':185.29, 'fastLap': 196.54}\n    ];\n    /*eslint-enable */\n\n    return service;\n\n    function findAll() {\n      var deferred = $q.defer();\n      deferred.resolve(driverSeasonResults);\n      return deferred.promise;\n    }\n\n    function findById(id) {\n      var deferred = $q.defer();\n      var employee = driverSeasonResults[id - 1];\n      deferred.resolve(employee);\n      return deferred.promise;\n    }\n\n    function getDonutData(data) {\n      var deferred = $q.defer();\n      deferred.resolve(aggregateDonutData2(data));\n      return deferred.promise;\n    }\n\n    // function aggregateDonutData(data) {\n    //   var newArray,\n    //       obj = {};\n    //   data.forEach(function(item) {\n    //     item.status in obj ? obj[item.status] += 1 : obj[item.status] = 1;\n    //   });\n    //   newArray = Object.keys(obj).map(function(key) {\n    //     return {label: key, value: obj[key]};\n    //   });\n    //   return newArray;\n    // }\n\n    function aggregateDonutData2(data) {\n      var arr2 = Object.keys(arr2 = data.map(function(item) {\n          return item.status;\n      }).reduce(function(acc, curr){\n          // these 4 assignments all work the same\n          // acc[curr] = acc[curr] ? acc[curr] + 1 : 1;\n          // acc[curr] = acc[curr] === undefined ? acc[curr] = 1 : acc[curr] + 1;\n          // acc[curr] = acc[curr] ? acc[curr] + 1 : acc[curr] = 1;\n          acc[curr] = acc[curr] + 1 || 1;\n          return acc;\n      }, [])).map(function(item){\n          return {label: item, value: arr2[item]};\n      });\n      return arr2;\n    }\n\n  }\n}());\n"],"file":"home/drivers-service.js","sourceRoot":"/source/"}